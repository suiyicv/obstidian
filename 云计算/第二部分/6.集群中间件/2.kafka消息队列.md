
计算机里面的进程和进程之间有没有通信的需求？
有！例如管道 | grep 把前面产生的数据传递个后面的进程进行处理

进程和进程之间怎么通信，有什么方式通信？
常规的就两种方式
## 1.共享内存
进程a产生数据存入到共享内存里面，进程b再从内存里面直接往外读取
一般适用于少量的数据通信
![[Pasted image 20240622113112.png]]
7M的共享内存，一般来说共享内存量都比较小，没法适配大数据量的通信。
## 2.消息队列MQ
![[Pasted image 20240622113358.png]]
代表性的MQ软件：  
kafka         十万并发  
RocketMQ 百万并发  
rabbitMQ  
zeroMQ

# 一.kafka消息队列

消息服务， 简称MQ  
用于在分布式业务环境，实现不同组件、不同的功能模块的高效通信

有了这个消息服务器，后续的开发人员，通过代码连接我们的MQ，通过他的代码往MQ里面写数据，都需要传什么样子的订单，都需要传什么样子的数据，写道MQ里，然后另一个系统再从MQ里往外取数据实时处理

# 二.消息服务的术语

![[Pasted image 20240622114530.png]]
producer 生产者 ：产生消息的进程
consumer 消费者  ：接收、处理消息的进程
broker 消息服务器
topics 主题  ：消息的分组，根据业务[不同的](https://so.csdn.net/so/search?q=%E4%B8%8D%E5%90%8C%E7%9A%84&spm=1001.2101.3001.7020)模块建不同的主题
partation 分区  ：确保某一个主题的消息的有序性

主leader
从follower
kafka这个软件，包括其他可以构建消息服务的软件，你既然本身结构，是一个高可用的话，kafka这个软件在存储，生产者写过来的数据的时候，这个数据也是有所谓的副本机制的，这个数据在Kafka里面也是以多副本的方式存储的，因此之前我们说过很多软件都有靠可用性

# 三.kafka消息确认机制 ACK
producer发送消息后，leader将消息同步给follower，然后返回ack给producer，表示消息已收到，此时才可以继续发送下一条消息。

kafka提供了以下3种ack级别：
0：leader接收到消息马上返回ack，此时可能还没有写入磁盘，可能丢失数据
1：leader将消息写入磁盘后，马上返回ack，此时可能还没同步follower，同样可能丢失数据
-1(all)：leader和follower都将数据写入磁盘后，返回ack。但是如果在写入磁盘后，ack尚未发送，此时leader发生故障，会导致数据写入重复

# 四.kafka安装部署
