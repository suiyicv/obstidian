基本上要监控一些设备cpu的使用情况，内存，磁盘，网卡的流量，上面的用户，进程等等
监控的目的，就是为了让运维人员能够及时的知道那个机器出现什么异常了，然后能够及时的响应这个问题，解决这个问题。

# 一.监控的方式
## 1.1人工巡检
巡检脚本
机房规模越大，这种常规的手段出现的频率就越高，巡检还包括查看一些物理设备的运行状态
## 1.2监控软件
zabbix 
IT基础设备（网络设备，服务器，存储）
promethues
适用于容器化应用的监控

# 2.zabbix监控获取数据的方式
我们的监控服务器，想利用它去搜集一些服务器的cpu，内存啥的，我们想要的这些数据怎么搜集？
通过一下四种方式
2.1 <font color="#d99694">zabbix-agent</font>， 适用于服务器、主机监控
2.2 <font color="#d99694">SNMP协议</font>，适用于网络设备(交换机、路由器、防火墙、IDS/IPS)
2.2  <font color="#d99694">udp/161</font>， v2版本稳定版，只要是能联网的设备都支持这个协议
2.3 <font color="#d99694">IPMI协议</font>，适用于监控硬件设备信息(温度、序列号)
2.4 <font color="#d99694">JMX协议</font>，适用于java应用的监控
![[Pasted image 20240623183119.png]]


# 二.zabbix server部署

## 1.确保时间同步
## 2.添加epel源
wget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo
![[Pasted image 20240623184138.png]]
## 3.添加zabbix仓库
vim /etc/yum.repos.d/zabbix.repo
[zabbix]
name=zabbix
baseurl=https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/
enabled=1
gpgcheck=0

zabbix4.5以后要求是centos8
## 4.安装zabbix服务端软件
zabbix支持两种数据库 mysql postgreSQL
yum install -y mariadb-server zabbix-server-mysql zabbix-web-mysql 
安装软件的时候会把apache和php都当成依赖，为了那个web界面能够正常展示
## 5.在数据库创建zabbix需要的表、授权用户
systemctl enable --now mariadb
mysql -uroot
create database zabbix charset utf8 collate utf8_bin;
create user 'zbuser'@'localhost' identified by 'redhat';
grant all on zabbix.* to 'zbuser'@'localhost';
flush privileges;
cd /usr/share/doc/zabbix-server-mysql-4.4.10/
![[Pasted image 20240623185828.png]]
zcat create.sql.gz | mysql -uroot zabbix
检查一下导入成功没
mysql -uroot
use  zabbix;
show tables;
![[Pasted image 20240623191015.png]]

### 6.编辑zabbix server配置文件
指定数据库连接
ls /etc/zabbix/
![[Pasted image 20240623191125.png]]
cd /etc/zabbix
vim zabbix_server.conf
	DBHost=localhost 
	DBName=zabbix 
	DBUser=zbuser 
	DBPassword=redhat 
	DBSocket=/var/lib/mysql/mysql.sock

## 7.启动zabbix server
systemctl enable --now zabbix-server
netstat -tunlp | grep zabbix
![[Pasted image 20240623192042.png]]
## 8.初始化zabbix webUI
vim /etc/httpd/conf.d/zabbix.conf 
php_value date.timezone Asia/Shanghai
![[Pasted image 20240623192233.png]]
systemctl enable --now httpd
## 9.访问zabbix webUI
http://192.168.140.10/zabbix/
![[Pasted image 20240623192512.png|400]]
![[Pasted image 20240623192609.png|400]]
![[Pasted image 20240623192704.png|400]]
![[Pasted image 20240623192716.png|400]]


![[Pasted image 20240623193055.png]]

![[Pasted image 20240623193125.png]]

