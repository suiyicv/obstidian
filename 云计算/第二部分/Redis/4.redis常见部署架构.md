
常见部署架构

多实例部署  
主从复制  
分片集群  
哨兵集群

1.多实例部署
安装目录: /opt/6380 端口: 6380  
安装目录: /opt/6381 端口: 6381

规划安装目录、配置文件
mkdir -p /opt/638{0,1}/{conf,data}
cp /usr/local/redis50/conf/redis.conf /opt/6380/conf/

编辑实例配置文件
vim /opt/6380/conf/redis.conf 

```bash
bind 192.168.140.10
port 6380
daemonize yes
appendonly yes
pidfile /var/run/redis_6380.pid
loglevel warning
logfile "/var/log/redis_6380.log"
dbfilename dump_6380.rdb
dir /opt/6380/data
appendfilename "appendonly_6380.aof"
```

redis-server /opt/6380/conf/redis.conf 
netstat -tunlp | grep redis
![[Pasted image 20240607173942.png]]
redis-server /usr/local/redis50/conf/redis.conf
netstat -tunlp | grep redis
![[Pasted image 20240607174122.png]]

cp /opt/6380/conf/redis.conf   /opt/6381/conf/redis.conf
sed -ri 's|6380|6381|g' /opt/6381/conf/redis.conf
redis-server /opt/6381/conf/redis.conf 
netstat -tunlp | grep redis
![[Pasted image 20240607174511.png]]
多实例

测试数据读写
redis-cli -h 192.168.1.100 -p 6380
```bash
192.168.1.100:6380> set name martin 
OK 
192.168.1.100:6380> get name 
"martin"
```



2.redis主从复制

在主从复制基础上，整合读写分离提升性能  
从服务器默认为只读  
基于异步的方式进行数据同步  
支持一主多从

规划
192.168.1.100（主）
192.168.1.110（从）

从服务器配置


#### 验证主从状态


主服务器状态：



从服务器状态:



 主从角色切换


将从服务器提升为主