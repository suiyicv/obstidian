vim  /usr/local/redis50/conf/redis.conf

1.监听地址
![[Pasted image 20240603202439.png]]
 重启一下服务
redis-cli shutdown
redis-server /usr/local/redis50/conf/redis.conf
nestat -tunlp | grep redis
![[Pasted image 20240603202816.png]]
会影响客户端连接
redis-cli
![[Pasted image 20240603202908.png]]
redis-cli -h 192.168.1.22

2.监听端口
port 6379
redis-cli -h 192.168.1.22 -p xxxx

3.redis接收请求的队列长度
tcp-backlog 1000

3.1 修改系统参数/内核参数
vim /etc/sysctl.conf
net.core.somaxconn = 1000
net.ipv4.tcp_max_syn_backlog = 1000
sysctl -p
somaxconn：系统级别网卡接收请求的队列长度
tcp_max_syn_backlog：系统级别接收tcp握手的队列长度

查看所有系统参数
sysctl -a 

4.客户端空闲的超时时间
timeout 30
 
5.指定redis的pid文件
pidfile /var/run/redis_6379.pid


6.定义错误日志
```bash
loglevel warning
logfile "/var/log/redis_6379.log"
```

7.定义数据库的数量
databaes 16
0-15
共16个数据库， 不同的数据库存储不同业务模块的缓存数据 
默认为0数据库
redis-cli -h 192.168.1.22
切换数据库
select 7

8.<span style="background:#affad1">定义持久化存储</span>
// rdb数据文件，快照形式
dbfilename dump_6379.rdb
dir /usr/local/redis50/data
// aof日志定义
appendonly yes
appendfilename "appendonly_6379.aof"

redis-cli -h 192.168.1.22 shutdown
redis-server /usr/local/redis50/conf/redis.conf

redis持久化保存的方式：
（1）手动触发 > bgsave

redis-cli -h 192.168.140.10
192.168.140.10:6379> bgsave
Background saving started
192.168.140.10:6379> exit

ls /usr/local/redis50/data/
![[Pasted image 20240603212427.png]]

(2)  自动触发, 定义频率，每N秒执行过几次写操作后，自动触发
vim  /usr/local/redis50/conf/redis.conf
save 900 1
save 300 10
save 60 10000 # 一分钟发生一万次写操作
以后你用redis你不希望做持久化保存的话，你可有把以上都注释，把 save "" 注释去掉



 9.设置redis密码
 requirepass 123456
 
 redis-cli -h 192.168.140.10 
 192.168.140.10:6379> auth 123456     // 密码认证 
 OK 
 192.168.140.10:6379> set a 10 OK


 10.redis并发连接
 maxclients 50000
 
11.最大内存策略
```bash
maxmemory 700M
maxmemory-policy volatile-lfu
```

最大内存策略说明:
// random：随机删除旧数据
// allkeys: 在所有键值对范围，随机删除数据
// volatile：只在设置了过期时间的数据范围内
volatile-random
allkeys-random
// 按照lru算法删除旧数据，最近最少访问原则
volatile-lru
allkeys-lru
// 按照lfu算法删除旧数据，根据数据历史访问频率
volatile-lfu
allkeys-lfu
noeviction， 默认策略，不用，内存满了直接报错
