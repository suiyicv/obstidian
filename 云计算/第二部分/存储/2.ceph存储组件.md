[ceph存储组件-CSDN博客](https://blog.csdn.net/u010198709/article/details/139670264?spm=1001.2014.3001.5501)

# ceph-mimic版本部署

1、环境规划
192.168.137.11 node01 ceph集群节点/ceph-deploy /dev/sdb
第一个机器装自动化工具
192.168.137.12 node02 ceph集群节点 /dev/sdb
192.168.137.13 node03 ceph集群节点 /dev/sdb
192.168.137.14 业务服务器

2.系统基础环境
2.1 关闭防火墙、SELinux
2.2 确保所有主机时间同步，写成计划任务
![[Pasted image 20240617151113.png]]
2.3所有主机ssh免密
![[Pasted image 20240617151143.png]]
mv /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys
scp -r /root/.ssh/ root@192.168.137.12:/root/
scp -r /root/.ssh/ root@192.168.137.13:/root/
scp -r /root/.ssh/ root@192.168.137.14:/root/

验证免密
for i in 11 12 13 14
do
ssh root@192.168.137.$i hostname
ssh root@192.168.137.$i date
done
![[Pasted image 20240617152009.png]]

2.4 添加所有主机解析

192.168.137.11 node01
192.168.137.12 node02
192.168.137.13 node03
192.168.137.14 app

for i in 11 12 13 14
do
scp /etc/hosts root@192.168.137.$i:/etc/hosts
done
![[Pasted image 20240617153108.png]]

3.配置ceph软件仓库
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
vim /etc/yum.repos.d/ceph.repo
```bash title:ceph.repo
[ceph]
name=ceph
baseurl=http://mirrors.aliyun.com/ceph/rpm-mimic/el7/x86_64/
enabled=1
gpgcheck=0
priority=1
 
[ceph-noarch]
name=cephnoarch
baseurl=http://mirrors.aliyun.com/ceph/rpm-mimic/el7/noarch/
enabled=1
gpgcheck=0
priority=1
 
[ceph-source]
name=Ceph source packages
baseurl=http://mirrors.aliyun.com/ceph/rpm-mimic/el7/SRPMS
enabled=1
gpgcheck=0
priority=1
```
3.1 为所有机器配置yum源
for i in 12 13 14
do 
scp /etc/yum.repos.d/ceph.repo root@192.168.137.$i:/etc/yum.repos.d/
done

3.2可做可不做
yum update 
reboot


4.安装ceph-deploy工具
第一个机器
```bash
yum install -y ceph-deploy 
```
5.ceph集群初始化
```bash
mkdir /etc/ceph
cd /etc/ceph
```
ImportError: No module named pkg_resources初始化时提示错误，安装yum install -y python2-pip


