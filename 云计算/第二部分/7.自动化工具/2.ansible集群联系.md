![[Pasted image 20240611111429.png|500]]
规划
两个调度器
192.168.140.41
192.168.140.42
两个web
192.168.140.43
192.168.140.44
nfs
192.168.140.40

ansible:
```bash
wget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repoyum -yum -y install ansible
vim /etc/ansible/hosts
	[keepalived]
	192.168.140.41
	192.168.140.42
	[web]
	192.168.140.43
	192.168.140.44
	[nfs]
	192.168.140.40
ansible all -m ping 
```
首先编写nfs服务器安装配置启动的剧本
```bash title:nfs服务器安装配置启动的剧本
- hosts: nfs
  tasks:
       - name: install nfs
         yum:
             name: nfs-utils
             state: present

       - name: shezhi public mulu
         shell:
             mkdir -p  /public/blog

       - name: bianxie peizhi wenjian
         lineinfile:
             path: /etc/exports
             line: "/public/blog 192.168.140.0/24(rw)"

       - name: qidong fuwu
         service:
             name: nfs-server
             state: started
             enabled: yes
```
ansible web -m shell -a "showmount -e 192.168.140.40"


