# 一.通过命令行的方式添加网卡
![[Pasted image 20240705151457.png|475]]
## 1.添加网卡
virsh attach-interface vm01 --type network  --model virtio  --source default --persistent
 --persistent   立即永久生效
--config          永久生效重启
--live               立即生效临时
## 2.查看网卡
virsh domiflist centos7.0
![[Pasted image 20240705190655.png]]
## 3.删除网卡
virsh detach-interface vm01 --type network --mac 52:54:00:42:3b:72 --persistent

# 二.网络工作模式
<span style="background:#affad1">NAT模式</span>
bridge桥接模式
隔离模式
## 1.<span style="background:#affad1">NAT模式</span>
NAT模式能够通信的三要素
网关
snat规则
路由转发
DNAT端口映射
iptables -t nat -I PREROUTING -d 192.168.140.10  -p tcp --dport 80 -j DNAT --to-destination 192.168.122.26:80
iptables -t nat -I PREROUTING -d 192.168.140.10  -p tcp --dport 2222 -j DNAT --to-destination 192.168.122.26:22
## 2.bridge桥接模式
作用: 跨物理机的虚拟机间相互通信
![[Pasted image 20240705162907.png|550]]
注意:
1.物理网卡静态地址
2.关闭NetworkManager服务
	systemctl stop NetworkManger
	systemctl disable NetworkManger
添加桥接网络
### 2.1图形化
![[Pasted image 20240705191633.png|400]]
![[Pasted image 20240705191658.png|400]]
![[Pasted image 20240705191725.png|400]]
![[Pasted image 20240705191750.png]]
![[Pasted image 20240705191847.png]]

### 2.2命令行方式
virsh iface-bridge ens33 br1
![[Pasted image 20240705204446.png]]
systemctl restart libvirtd
![[Pasted image 20240705204545.png|450]]


